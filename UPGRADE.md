# 🚀 CBIT AutoExam 一键升级指南

## 📋 升级说明

本次升级包含以下重要功能：
- ✨ **精确数量控制** - 可精确设置每种题型的数量
- 🏷️ **统一标签体系** - 修复题目筛选匹配问题  
- 🎨 **全新UI设计** - 独立模态窗口，更清爽的界面
- 🌐 **完整多语言** - 中英文界面支持

## 🚀 一键升级（超简单！）

### 方法1：在服务器上直接升级

```bash
# SSH连接到你的宝塔服务器
ssh root@你的服务器IP

# 进入项目目录
cd /www/wwwroot/cbit-autoexam

# 拉取最新代码（包含升级脚本）
git pull origin main

# 运行一键升级脚本
./upgrade.sh
```

### 方法2：如果项目目录不同

```bash
# 根据你的实际项目路径调整
cd /你的项目路径

# 拉取最新代码
git pull origin main

# 运行升级脚本
./upgrade.sh
```

## 🛡️ 安全保障

升级脚本会自动：
- ✅ 完整备份代码和数据库
- ✅ 安全停止现有服务
- ✅ 更新到最新代码
- ✅ 自动运行数据库迁移
- ✅ 重新启动服务
- ✅ 验证升级结果

## 📝 升级过程

升级脚本执行时会显示：

```
========================================
🚀 CBIT AutoExam 升级脚本 v1.0
========================================
时间: Sat Sep 28 02:30:00 CST 2025
目标: /www/wwwroot/cbit-autoexam
========================================

本次升级将带来以下新功能：
✨ 精确数量控制功能
🏷️ 统一题目标签体系
🎨 全新UI界面设计
🌐 完整多语言支持

确认要升级系统吗? [y/N]: y
```

只需要输入 `y` 确认，然后等待自动完成！

## 🎯 升级后测试

1. **访问系统**：http://你的服务器IP:8080
2. **登录管理后台**：用户名 `admin`，密码 `imbagogo`
3. **测试新功能**：
   - 进入「考试配置管理」
   - 创建新配置时启用「精确数量控制」
   - 测试题目筛选：计算机科学+高中水平+选择题

## 🔧 常见问题

### Q: 升级失败怎么办？
A: 脚本会自动备份，按提示的回滚命令即可恢复

### Q: 数据会丢失吗？
A: 不会，升级前会完整备份所有数据

### Q: 升级需要多长时间？
A: 通常2-5分钟，取决于网络速度

### Q: 可以在生产环境升级吗？
A: 建议在非高峰时段升级，脚本已充分测试

## 🆘 紧急回滚

如果升级后出现问题，使用以下命令快速回滚：

```bash
cd /www/wwwroot/cbit-autoexam
docker-compose down
rm -rf * .* 2>/dev/null || true
cp -r /www/backup/cbit-autoexam-backup-最新时间戳/* .
docker-compose up -d
```

## 📞 技术支持

如遇问题：
1. 检查升级日志
2. 确认Docker服务正常
3. 验证网络连接
4. 联系技术支持

---

**升级就是这么简单！一条命令搞定！** 🎉
